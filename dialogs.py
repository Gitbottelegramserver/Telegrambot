from aiogram import Router, F, types
from aiogram.types import Message
from aiogram.fsm.context import FSMContext
from aiogram.fsm.state import State, StatesGroup

router = Router()

# –°—Ç–µ–π—Ç –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –º–æ–¥—É–ª—è–º
class LearningFlow(StatesGroup):
    choosing_module = State()

# –°—Ç–∞—Ä—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
@router.message(F.text.lower() == "üéì –æ–±—É—á–µ–Ω–∏–µ" or F.text.lower() == "–º–æ–¥—É–ª–∏")
async def show_modules(message: Message, state: FSMContext):
    await state.set_state(LearningFlow.choosing_module)
    await message.answer(
        "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –º–æ–¥—É–ª—å:
"
        "1. –í–≤–æ–¥–Ω—ã–π –º–æ–¥—É–ª—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
"
        "2. –ê—Ä–±–∏—Ç—Ä–∞–∂
"
        "3. –°–∫–∞–ª—å–ø-—Ç—Ä–µ–π–¥–∏–Ω–≥
"
        "4. Smart Money
"
        "5. –í–æ–ª–Ω–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑
"
        "6. DeFi
"
        "7. –ü—Ä–æ–ø —Ç—Ä–µ–π–¥–∏–Ω–≥

"
        "–ù–∞–ø–∏—à–∏ –Ω–æ–º–µ—Ä –º–æ–¥—É–ª—è, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏."
    )

# –û—Ç–≤–µ—Ç—ã –ø–æ –º–æ–¥—É–ª—è–º
@router.message(LearningFlow.choosing_module)
async def handle_module_info(message: Message, state: FSMContext):
    module_number = message.text.strip()
    responses = {
        "1": "üìò –ú–æ–¥—É–ª—å 1: –í–≤–æ–¥–Ω—ã–π –º–æ–¥—É–ª—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî —Ä–∞—Å—Å–∫–∞–∂–µ—Ç –ø—Ä–æ –æ—Å–Ω–æ–≤—ã –∫—Ä–∏–ø—Ç—ã, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Ö–æ–ª–æ–¥–Ω—ã–µ/–≥–æ—Ä—è—á–∏–µ –∫–æ—à–µ–ª—å–∫–∏ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.",
        "2": "üìò –ú–æ–¥—É–ª—å 2: –ê—Ä–±–∏—Ç—Ä–∞–∂ ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞—Ä–±–∏—Ç—Ä–∞–∂—É, –∑–∞—â–∏—Ç–µ –æ—Ç —Å–∫–∞–º–∞, –≤—ã–±–æ—Ä—É –±–∏—Ä–∂ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º.",
        "3": "üìò –ú–æ–¥—É–ª—å 3: –°–∫–∞–ª—å–ø-—Ç—Ä–µ–π–¥–∏–Ω–≥ ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CScalp, –∞–Ω–∞–ª–∏–∑ –æ–±—ä—ë–º–æ–≤ –∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤.",
        "4": "üìò –ú–æ–¥—É–ª—å 4: Smart Money ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∫—Ä—É–ø–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –∏ —Ä–∞–±–æ—Ç–∞ —Å –æ–±—ä—ë–º–∞–º–∏.",
        "5": "üìò –ú–æ–¥—É–ª—å 5: –í–æ–ª–Ω–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑ ‚Äî –≥–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ –ø–æ –≤–æ–ª–Ω–∞–º, —Ä–∏—Å–∫–∞–º, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞–º.",
        "6": "üìò –ú–æ–¥—É–ª—å 6: DeFi ‚Äî —Ñ–ª–∏–ø —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –æ–Ω—á–µ–π–Ω –∞–Ω–∞–ª–∏–∑, —Ñ–∞—Ä–º–∏–Ω–≥, –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–∫–∞–º–∞.",
        "7": "üìò –ú–æ–¥—É–ª—å 7: –ü—Ä–æ–ø —Ç—Ä–µ–π–¥–∏–Ω–≥ ‚Äî –ø–æ–ª–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ funded —Ç—Ä–µ–π–¥–∏–Ω–≥—É + –∂–∏–≤—ã–µ —Å–µ—Å—Å–∏–∏ –∏ –±–µ–∫—Ç–µ—Å—Ç—ã."
    }

    answer = responses.get(module_number, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –º–æ–¥—É–ª—è –æ—Ç 1 –¥–æ 7.")
    await message.answer(answer)
